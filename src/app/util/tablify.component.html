<div class="simple-table-container">
	<div class="simple-table-filter">
		<md-input-container floatPlaceholder="never">
			<input mdInput #filter placeholder="search...">
		</md-input-container>
        <span
            style="opacity:0.5; font-size: 0.7em;padding-left: 15px;"
            *ngIf="selectedSampleIdList.length > 0">
            Sample selected: {{selectedSampleIdList.length}}
            <br/>
            {{selectedSampleIdList|json}}
        </span>
        <span style="opacity:0.7; font-size: 0.7em;padding-left: 15px;">
            <br/>
            <span *ngFor="let sample of rawSampleList">
                <span *ngIf="sample['TMP_CHECKED']">
                "{{sample.id}}",
                </span>
            </span>
        </span>
	</div>
	<md-table #table [dataSource]="sampleDataSource" class="simple-table" mdSort>

		<ng-container
			cdkColumnDef="{{columnKey}}"
			*ngFor="let columnKey of columnMapKeys">
            <span *ngIf="columnMap[columnKey]['SYS_TYPE'] == 'checkbox'">
                <md-header-cell *cdkHeaderCellDef class="simple-table-header-cell-checkbox">
                    <md-checkbox
                        [(ngModel)]="isSelectAll"
                        (ngModelChange)="selectAllSamples()"
                        color="primary">
                    </md-checkbox>
                </md-header-cell>
            </span>
            <span *ngIf="columnMap[columnKey]['SYS_TYPE'] != 'checkbox'">
                <md-header-cell *cdkHeaderCellDef class="simple-table-header-cell" md-sort-header>
                    {{columnMap[columnKey]['SYS_LABEL']}}
                </md-header-cell>
            </span>
            <span *ngIf="columnMap[columnKey]['SYS_TYPE'] == 'checkbox'">
                <md-cell
                    *cdkCellDef="let row"
                    [ngClass]="{'simple-table-cell-checkbox': row['TMP_TABLE_ITEM'],'simple-table-cell-checkbox-indent': !row['TMP_TABLE_ITEM']}">
                    <md-checkbox
                        [(ngModel)]="row['TMP_CHECKED']"
                        (ngModelChange)="selectSample(row)"
                        color="primary">
                        <span style="font-size:0.5em;opacity:0.5">
                            <!--{{row.id}} -->
                            <!--({{rawSampleList[row.TMP_NEXT_SAMPLE_INDEX].id.substr(21)}})-->

                            <!--The question mark is used for the samples that do not have any next sample id-->
                            <!--for example, samples in the scheduled/completed-->
                            ({{rawSampleList[row.TMP_NEXT_SAMPLE_INDEX]?.id.substr(21)}})
                        </span>
                    </md-checkbox>
                </md-cell>
            </span>
            <span *ngIf="columnMap[columnKey]['SYS_TYPE'] != 'checkbox'">
                <md-cell *cdkCellDef="let row" class="simple-table-cell">
                    <span *ngIf="row['TMP_TABLE_ITEM'] && columnKey == 'SYS_SAMPLE_CODE'">
                        <span *ngIf="!targetHybridType">

                        <span *ngIf="row['SYS_RUN_CODE']">
                            <button
                                md-icon-button
                                (click)="expandSample(row,'RUN')">
                                +
                            </button>
                            <span
                                (click)="openInternalSampleDialog(row)">
                                {{row['SYS_RUN_CODE']}}
                            </span>
                        </span>
                        <span *ngIf="!row['SYS_RUN_CODE'] && row['SYS_LANE_CODE']">
                            <button
                                md-icon-button
                                (click)="expandSample(row, 'LANE')">
                                +
                            </button>
                            <span
                                (click)="openInternalSampleDialog(row)">
                                {{row['SYS_LANE_CODE']}}
                            </span>
                        </span>
                        <span *ngIf="!row['SYS_RUN_CODE'] && !row['SYS_LANE_CODE'] && row['SYS_CAPTURE_CODE']">
                            <button
                                md-icon-button
                                (click)="expandSample(row, 'CAPTURE')">
                                +
                            </button>
                            <span
                                (click)="openInternalSampleDialog(row)">
                                {{row['SYS_CAPTURE_CODE']}}
                            </span>
                        </span>
                        </span>
                        <span *ngIf="targetHybridType">
                            <button
                                md-icon-button
                                (click)="expandSample(row, 'CAPTURE')">
                                +
                            </button>
                            <span
                                (click)="openInternalSampleDialog(row)">
                                {{row['SYS_'+targetHybridType+'_CODE']}}
                            </span>
                        </span>
                        <span *ngIf="(!row['SYS_RUN_CODE'] && !row['SYS_LANE_CODE'] && !row['SYS_CAPTURE_CODE'])">
                            {{row[columnKey]}}
                        </span>
                    </span>
                    <span *ngIf="!row['TMP_TABLE_ITEM'] || columnKey != 'SYS_SAMPLE_CODE'">
                        {{row[columnKey]}}
                    </span>
                </md-cell>
            </span>
		</ng-container>

		<md-header-row *cdkHeaderRowDef="columnMapKeys" class="simple-table-header-row">
		</md-header-row>

		<md-row *cdkRowDef="let row; columns: columnMapKeys;" class="simple-table-row">
		</md-row>
	</md-table>
	<md-paginator #paginator
		[length]="sampleDataSource.dataLength"
		[pageIndex]="0"
		[pageSize]="10"
		[pageSizeOptions]="[1,2, 10, 25, 100]">
	</md-paginator>
</div>
