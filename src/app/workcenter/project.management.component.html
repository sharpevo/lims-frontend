<div fxLayout="row" fxLayoutAlign="space-between stretch" >
    <div>
        <button
            md-raised-button
            (click)="openNewEntityDialog(entity)">
            NEW
        </button>
    </div>
</div>
<plugin-excel-processor
    *ngIf="(entity | json) != '{}'"
    [hybridObjectMap]="{}"
    [sampleList]="sampleList"
    [workcenter]="entity">
</plugin-excel-processor>
<h2>
    Sample List
</h2>
<div
    fxLayout="column"
    fxLayoutAlign="space-between stretch">
    <md-accordion [multi]="true">
    <div *ngFor="let sample of sampleList">
        <md-expansion-panel
            (opened)="showHistory[sample.id] = true"
            (closed)="showHistory[sample.id] = false">
            <md-expansion-panel-header>
                <md-panel-title>
                    {{sample.SYS_SAMPLE_CODE}}
                    <span style="opacity:0.5;font-size:0.5em;margin-left:5px;">
                        ({{sample.id}})
                    </span>
                </md-panel-title>
                <md-panel-description>
                </md-panel-description>
            </md-expansion-panel-header>
            <div fxLayout="row" fxLayoutAlign="start stretch" >
                <div style="width:700px">
                    <sample-history
                        *ngIf="showHistory[sample.id]"
                        [sample]="sample">
                    </sample-history>
                </div>
                <div fxLayout="column" fxLayoutAlign="start start" >
                    <div
                        *ngFor="let schema of sample.SYS_SCHEMA"
                        fxLayout="row" fxLayoutAlign="space-between center" >
                        <div style="opacity:0.7">
                            {{schema.SYS_LABEL}}:
                        </div>
                        <div style="margin-left: 5px;">
                            <b>
                                <span
                                    *ngIf="schema.SYS_TYPE == 'date'">
                                    {{sample[schema.SYS_CODE] | date: 'yyyy.MM.dd HH:mm'}}
                                </span>
                                <span
                                    *ngIf="schema.SYS_TYPE != 'date'">
                                        {{sample[schema.SYS_CODE]}}
                                </span>
                            </b>
                        </div>
                    </div>
                    <div style="opacity:0.7">
                        Created:
                    </div>
                    <div style="margin-left: 5px;">
                        <b>
                            {{sample.createdAt | date: 'yyyy.MM.dd HH:mm'}}
                        </b>
                    </div>
                </div>
            </div>
            <md-action-row>
                <button md-button (click)="openEditEntityDialog(sample)">Edit</button>
                <button md-button color="accent" (click)="showMessage('Click the dot in the diagram')">Reschedule</button>
                <button md-button color="warn" (click)="showMessage('planning...')">Pause</button>
            </md-action-row>
        </md-expansion-panel>
    </div>
    </md-accordion>
</div>
<br/>
<br/>
<div>
    <button
        md-raised-button
        (click)="prevPage()">
        <md-icon>keyboard_arrow_left</md-icon>
    </button>
    <button
        md-raised-button
        (click)="nextPage()">
        <md-icon>keyboard_arrow_right</md-icon>
    </button>
</div>
